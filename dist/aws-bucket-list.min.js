!function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,n){},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){if(!u(e,t)){var n=e.getAttribute("class").split(/\s+/);n.push(t),e.setAttribute("class",n.join(" "))}}function s(e,t){var n=e.getAttribute("class").split(/\s+/).filter(function(e){return e!==t});e.setAttribute("class",n.join(" "))}function u(e,t){return e&&e.getAttribute("class")&&-1!==e.getAttribute("class").indexOf(t)}n.r(t),location.origin||(location.origin=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""));var r=function(){function d(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this._onData=this._renderToContainer,this._container=e,this._url=t,this._config=n}var e,t,n;return e=d,n=[{key:"niceSize",value:function(e){if(!/^\d+$/.test(e))return e;var t="B";return 1024<e&&(e/=1024,t="KB"),1024<e&&(e/=1024,t="MB"),"B"!==t&&(e=Number(e).toFixed(2)),e+" "+t}},{key:"makeTree",value:function(e){var t,a,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/",o=2<arguments.length?arguments[2]:void 0,l=/\/$/;return t={name:o,list:[],url:n.replace(/\/$/,""),lastmod:"",size:""},e.sort(function(e,t){return e.length<t.length?-1:1}),e.forEach(function(o){var r,i=o.name.split("/").filter(function(e){return""!=e});a=t,i.forEach(function(t,e){if(r=a.list.find(function(e){return e.name===t}))a=r;else{var n={name:t,lastmod:o.lastmod,url:a.url+"/"+t,size:e+1===i.length?parseInt(o.size,10):0};(e+1<i.length||l.test(o.name))&&(n.list=[]),a.list.push(n),a=n}})}),function e(t){return t.list&&(t.list.sort(function(e,t){var n=!!e.list,o=!!t.list;return n!==o?n<o?1:-1:e.name<t.name?-1:1}),t.list.map(e)),t}(t),function n(e){if(e.list){var t=e.list.reduce(function(e,t){return e+n(t)},0);return e.size=t}return e.size}(t),t}},{key:"transformXmlToJSON",value:function(e){for(var t=e.getElementsByTagName("Contents"),n=[],o=0;o<t.length;o++)n.push({name:t[o].getElementsByTagName("Key")[0].firstChild.data,size:t[o].getElementsByTagName("Size")[0].firstChild.data,lastmod:t[o].getElementsByTagName("LastModified")[0].firstChild.data});return n}},{key:"filterData",value:function(e,t){return t||t.length?e.filter(function(n){return t.reduce(function(e,t){return e&&!t.test(n.name)},!0)}):e}}],(t=[{key:"render",value:function(){this._loadData(),this._listenEvents()}},{key:"_listenEvents",value:function(){var n=this;this._container.addEventListener("click",function(e){e.target;if(u(e.target.parentNode,"node--root"))return e.preventDefault(),!1;if(u(e.target,"node__name--folder")){var t=e.target.parentNode,o=parseInt(t.getAttribute("data-left"),10),r=parseInt(t.getAttribute("data-right"),10),i="node--folder-opened",a=!1;u(t,i)?s(t,i):(l(t,i),a=!0),i="node--visible",n._container.querySelectorAll(".node").forEach(function(e){var t=parseInt(e.getAttribute("data-left"),10),n=parseInt(e.getAttribute("data-right"),10);o<t&&n<r&&(a?(l(e,i),u(e,"node--folder")&&l(e,"node--folder-opened")):(s(e,i),s(e,"node--folder-opened")))}),n._highlight()}})}},{key:"_highlight",value:function(){var t=0;this._container.querySelectorAll(".node").forEach(function(e){s(e,"node--even"),s(e,"node--odd"),u(e,"node--visible")&&l(e,t++%2?"node--even":"node--odd")})}},{key:"_loadData",value:function(){var e=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest),t=this;e.open("get",this._url),e.responseType="document",e.onload=function(){var e;e=d.transformXmlToJSON(this.responseXML),e=d.filterData(e,t._config.exclude),e=d.makeTree(e,t._url,"domain"===t._config.rootFolderName?t._url:t._config.rootFolderName),t._data=e,t._onData(e)},e.send(null)}},{key:"_renderFooter",value:function(){var e="Amazon S3 Bucket list v :version";return!1!==this._config.footerText?(e=this._config.footerText||e,'<p class="footer">'.concat(e.replace(":version",VERSION),"</p>")):""}},{key:"_renderToContainer",value:function(){var e,i=this._config.defaultOpenedLevel||1,a=this._config.columns||{size:1,lastmod:1},l=+(!1===this._config.rootFolderName),s=10,u=0;e=function t(e,n){var o=[];var r={nodeMod:[],content:"",name:"",left:u+1,right:0,padding:s*(n-l)};++u;0===n&&(r.nodeMod.push("node--root","node--folder-opened"),l&&r.nodeMod.push("node--root-hidden"));n<=i&&(r.nodeMod.push("node--visible"),e.list&&n<i&&r.nodeMod.push("node--folder-opened"));e.list?(r.name='<span class="node__name node__name--folder"><i class="icon-folder"></i>'.concat(e.name,"</span>"),r.nodeMod.push("node--folder"),r.content=e.list.map(function(e){return t(e,n+1)}).join("")):(r.name='<a target="_blank" href="'.concat(encodeURI(e.url),'" \n            class="node__name node__name--file"><i class="icon-doc-inv"></i>').concat(e.name,"</a>"),r.nodeMod.push("node--file"));r.right=++u;a.size&&o.push('<span class="node__info-value">'.concat(d.niceSize(e.size),"</span>"));a.lastmod&&o.push('<span class="node__info-value">'.concat(e.lastmod,"</span>"));return'\n          <div style="padding-left: '.concat(r.padding,'px" data-left="').concat(r.left,'" data-right="').concat(r.right,'" class="node').concat(" "+r.nodeMod.join(" "),'">\n            ').concat(r.name).concat(o.join(""),"\n          </div>\n          ").concat(r.content)}(this._data,0),e+=this._renderFooter(),this._container.innerHTML=e,setTimeout(this._highlight.bind(this),0)}}])&&o(e.prototype,t),n&&o(e,n),d}();n(0);window.addEventListener("load",function(){var e=window.appConfig,t=document.getElementById(e.appId),n=e.debugUrl?e.debugUrl:location.origin;new r(t,n,e).render()})}]);