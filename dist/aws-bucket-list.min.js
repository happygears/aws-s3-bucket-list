!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var o=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(o);n(2),window.addEventListener("load",function(){var e=window.appConfig,t=document.getElementById(e.appId),n=e.debugUrl?e.debugUrl:location.origin;new r.default(t,n,e).render()})},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!a(e,t)){var n=e.getAttribute("class").split(/\s+/);n.push(t),e.setAttribute("class",n.join(" "))}}function i(e,t){var n=e.getAttribute("class").split(/\s+/).filter(function(e){return e!==t});e.setAttribute("class",n.join(" "))}function a(e,t){return-1!==e.getAttribute("class").indexOf(t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();location.origin||(location.origin=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""));var s=function(){function e(t,n,r){o(this,e),this._onData=this._renderToContainer,this._container=t,this._url=n,this._config=r}return l(e,[{key:"render",value:function(){this._loadData(),this._listenEvents()}},{key:"_listenEvents",value:function(){var e=this;this._container.addEventListener("click",function(t){t.target;if(a(t.target.parentNode,"node--root"))return t.preventDefault(),!1;if(a(t.target,"node__name--folder")){var n=t.target.parentNode,o=parseInt(n.getAttribute("data-left"),10),l=parseInt(n.getAttribute("data-right"),10),s="node--folder-opened",d=!1;a(n,s)?i(n,s):(r(n,s),d=!0),s="node--visible",e._container.querySelectorAll(".node").forEach(function(e){var t=parseInt(e.getAttribute("data-left"),10),n=parseInt(e.getAttribute("data-right"),10);o<t&&l>n&&(d?(r(e,s),a(e,"node--folder")&&r(e,"node--folder-opened")):(i(e,s),i(e,"node--folder-opened")))}),e._highlight()}})}},{key:"_highlight",value:function(){var e=0;this._container.querySelectorAll(".node").forEach(function(t){i(t,"node--even"),i(t,"node--odd"),a(t,"node--visible")&&r(t,e++%2?"node--even":"node--odd")})}},{key:"_loadData",value:function(){var t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest),n=this;t.open("get",this._url),t.responseType="document",t.onload=function(){var t=void 0;t=e.transformXmlToJSON(this.responseXML),t=e.filterData(t,n._config.exclude),t=e.makeTree(t,n._url,"domain"===n._config.rootFolderName?n._url:n._config.rootFolderName),n._data=t,n._onData(t)},t.send(null)}},{key:"_renderFooter",value:function(){var e="Amazon S3 Bucket list v :version";return!1!==this._config.footerText?(e=this._config.footerText||e,'<p class="footer">'+e.replace(":version",VERSION)+"</p>"):""}},{key:"_renderToContainer",value:function(){function t(l,s){var d=[],u={nodeMod:[],content:"",name:"",left:a+1,right:0,padding:i*(s-r)};return++a,0===s&&(u.nodeMod.push("node--root","node--folder-opened"),r&&u.nodeMod.push("node--root-hidden")),s<=n&&(u.nodeMod.push("node--visible"),l.list&&s<n&&u.nodeMod.push("node--folder-opened")),l.list?(u.name='<span class="node__name node__name--folder"><i class="icon-folder"></i>'+l.name+"</span>",u.nodeMod.push("node--folder"),u.content=l.list.map(function(e){return t(e,s+1)}).join("")):(u.name='<a target="_blank" href="'+encodeURI(l.url)+'" \n            class="node__name node__name--file"><i class="icon-doc-inv"></i>'+l.name+"</a>",u.nodeMod.push("node--file")),u.right=++a,o.size&&d.push('<span class="node__info-value">'+e.niceSize(l.size)+"</span>"),o.lastmod&&d.push('<span class="node__info-value">'+l.lastmod+"</span>"),'\n          <div style="padding-left: '+u.padding+'px" data-left="'+u.left+'" data-right="'+u.right+'" class="node '+u.nodeMod.join(" ")+'">\n            '+u.name+d.join("")+"\n          </div>\n          "+u.content}var n=this._config.defaultOpenedLevel||1,o=this._config.columns||{size:1,lastmod:1},r=+(!1===this._config.rootFolderName),i=10,a=0,l=void 0;l=t(this._data,0),l+=this._renderFooter(),this._container.innerHTML=l,setTimeout(this._highlight.bind(this),0)}}],[{key:"niceSize",value:function(e){if(!/^\d+$/.test(e))return e;var t="B";return e>1024&&(e/=1024,t="KB"),e>1024&&(e/=1024,t="MB"),"B"!==t&&(e=Number(e).toFixed(2)),e+" "+t}},{key:"makeTree",value:function(e){function t(e){return e.list&&(e.list.sort(function(e,t){var n=!!e.list,o=!!t.list;return n!==o?n<o?1:-1:e.name<t.name?-1:1}),e.list.map(t)),e}function n(e){if(e.list){var t=e.list.reduce(function(e,t){return e+n(t)},0);return e.size=t,t}return e.size}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",r=arguments[2],i=/\/$/,a=void 0,l=void 0;return a={name:r,list:[],url:o.replace(/\/$/,""),lastmod:"",size:""},e.sort(function(e,t){return e.length<t.length?-1:1}),e.forEach(function(e){var t=void 0,n=e.name.split("/").filter(function(e){return""!=e});l=a,n.forEach(function(o,r){if(t=l.list.find(function(e){return e.name===o}))l=t;else{var a={name:o,lastmod:e.lastmod,url:l.url+"/"+o,size:r+1===n.length?parseInt(e.size,10):0};(r+1<n.length||i.test(e.name))&&(a.list=[]),l.list.push(a),l=a}})}),t(a),n(a),a}},{key:"transformXmlToJSON",value:function(e){for(var t=e.getElementsByTagName("Contents"),n=[],o=0;o<t.length;o++)n.push({name:t[o].getElementsByTagName("Key")[0].firstChild.data,size:t[o].getElementsByTagName("Size")[0].firstChild.data,lastmod:t[o].getElementsByTagName("LastModified")[0].firstChild.data});return n}},{key:"filterData",value:function(e,t){return t||t.length?e.filter(function(e){return t.reduce(function(t,n){return t&&!n.test(e.name)},!0)}):e}}]),e}();t.default=s},function(e,t){}]);